Unit]
Description=Harrow runner - %i
Requires=harrow.service
After=harrow.service
{% if harrow.services.notify_on_failure %}
OnFailure=systemd-harrow-notify-about-failure@%n.service
{% endif %}

[Service]
EnvironmentFile=/etc/harrow/env
WorkingDirectory=/tmp
PrivateTmp=true
ExecStart=/usr/local/bin/harrow runner --connect %I
User=harrow
Restart=always

# To keep forked controller processes around when this unit is restarted
KillMode=process
